# V1 - PaymentProcess Create

| Post | /v1/PaymentProcess | 
| :-: | :-: | 

> Create and submit a paymentprocess

### Request Body

Content Type:

```
application/json

```

> Fields marked with `*` are required and must be specified.

```
- CardHolderName* [string] 
- CardNumber* [string] 
- CVV* [string]
- ExpirationMonth* [int] [0-12]
- ExpirationYear* [int] [2020-int.max]
- Amount* [decimal] [5.0 - 7500.0]
- CardType* [enum] [Visa, MasterCard, Dinners, Other]
- Currency* [enum] [USD, EUR, BRL]
- ContextId* [Guid] [Shopping Cart Id from the Merchant Entity]

```

### Response Body (200)

Content Type:

```
application/json

```

```
- ContextId [Guid] [Shopping cart Id from the Merchant Entity]
- PaymentProcessId  [int] [Registered Payment Process Id]
- PaymentAcceptanceStatus [enum] [Accepted, Denied] [Acceptance of payment status generated by Bank Entity]
```

### Access Control

The following access control policy is required for this endpoint.

Policy Name:

```

WriteProcessPayment

```

### Acceptance Criteria

The following acceptance criteria rules are required for this endpoint.

> The card data should be encrypted before calling bank client

> When the bank entity returns accepted or denied the the payment process is stored on the service database, then a 201 should be returned


> The CardNumber for effects of this demo will be stored without ofuscation


> When user is not logged in, then a 401 should be returned


> When user does not have the requiredPolicy, then a 403 should be returned


> When it was not possible to connect with bank entity, then a 404 should be returned


> When expiration year and expiration month are before than todays date, then a 422 should be returned


> When the same user tries to process a payment for the third time with the same contextid and the payment is rejected by the Bank Entity, then a 422 should be returned


  